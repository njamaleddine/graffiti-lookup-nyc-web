name: Test API Connection

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Test NYC 311 API response
        run: |
          response=$(curl -s -o /dev/null -w "%{http_code}" "https://a002-oomwap.nyc.gov/TagOnline/Shared/CannotRespond?sr=315055")
          echo "HTTP Response: $response"
          if [ "$response" = "200" ]; then
            echo "✅ API is accessible"
          else
            echo "❌ API returned $response"
            exit 1
          fi
